table:
  schema: public
  name: nft_listings
object_relationships:
  - name: nft_contracts # TODO: deprecate
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: nft_contracts
        insertion_order: null
        column_mapping:
          nft_contract_id: id
  - name: nft_contract
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: nft_contracts
        insertion_order: null
        column_mapping:
          nft_contract_id: id
# allow selection for stats queries.
# TODO: make views instead for stats
select_permissions:
  - role: anonymous
    permission:
      columns:
        - accepted_offer_id
        - approval_id
        - price
        - currency
        - kind
        - listed_by
        - market_id
        - nft_contract_id
        - receipt_id
        - token_id
        - accepted_at
        - created_at
        - unlisted_at
        - invalidated_at
      filter: {}
      allow_aggregations: true
